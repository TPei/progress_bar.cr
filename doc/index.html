<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta id="repository-name" content="github.com/TPei/progress_bar.cr">
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="js/doc.js"></script>
  <title>README - github.com/TPei/progress_bar.cr</title>
</head>
<body>

<div id="types-list">
  <div id="search-box">
    <input type="search" id="search-input" placeholder="Search...">
  </div>

  <ul>
    <li class="current"><a href="index.html">README</a></li>
  </ul>

  <ul>
  
  <li class=" " data-id="github.com/TPei/progress_bar.cr/ProgressBar" data-name="progressbar">
      <a href="ProgressBar.html">ProgressBar</a>
      
    </li>
  
  <li class=" " data-id="github.com/TPei/progress_bar.cr/ProgressExceededException" data-name="progressexceededexception">
      <a href="ProgressExceededException.html">ProgressExceededException</a>
      
    </li>
  
</ul>

</div>

<div id="main-content">
<h1>ProgressBar.cr</h1>

<h2>Installation</h2>

<p>Add to your shard.yml</p>

<pre><code class='language-yaml'>dependencies:
  progress_bar.cr:
    github: tpei/progress_bar.cr
    branch: master</code></pre>

<p>and then install the library into your project with</p>

<pre><code class='language-bash'>$ crystal deps</code></pre>

<h2>Usage</h2>

<pre><code class='language-crystal'><span class="k">require</span> <span class="s">&quot;progress_bar&quot;</span>

<span class="c"># create a new progress bar to your liking</span>

<span class="c"># simple</span>
pb <span class="o">=</span> <span class="t">ProgressBar</span>.<span class="k">new</span>
pb.with_progress <span class="k">do</span>
  <span class="c"># print empty progress bar</span>
  pb.init

  <span class="n">10</span>.times <span class="k">do</span>
    sleep <span class="n">0.1</span> <span class="c"># very time intense&#33;</span>
    pb.tick <span class="c"># increase bar progress by 1</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="c"># &#61;&gt; &#91;##########&#93;</span>

<span class="c"># more control over stuff</span>
pb <span class="o">=</span> <span class="t">ProgressBar</span>.<span class="k">new</span>(ticks: <span class="n">100</span>, chars: <span class="n">:funky</span>, completion_message: <span class="s">&quot;Installation done&#33;&quot;</span>)

r <span class="o">=</span> <span class="t">Random</span>.<span class="k">new</span>

<span class="c"># give a block that performs your time-intense task</span>
pb.with_progress <span class="k">do</span>
  <span class="c"># print empty bar</span>
  pb.init

  sleep r.rand(<span class="n">0.3</span>) <span class="c"># heavy computation going on here&#33;&#33;</span>
  <span class="n">80</span>.times <span class="k">do</span>
		sleep r.rand(<span class="n">0.3</span>)
    <span class="c"># increment the bar</span>
    pb.tick
  <span class="k">end</span>

  sleep <span class="n">0.1</span>
  <span class="c"># progress the bar by an amount of your choice</span>
  pb.progress by: <span class="n">5</span>

  sleep <span class="n">0.2</span>
  pb.progress by: <span class="n">7</span>

  sleep <span class="n">0.2</span>
  pb.progress by: <span class="n">4</span>

  <span class="n">4</span>.times <span class="k">do</span>
    sleep <span class="n">0.1</span>
    pb.tick
  <span class="k">end</span>
<span class="k">end</span>

sleep <span class="n">0.1</span></code></pre>

<h2>Errors</h2>

<p>Don't exceed the tick number, will throw an exception!</p>

<pre><code class='language-crystal'><span class="c"># count already &#61;&#61; ticks</span>
<span class="k">begin</span>
  pb.tick <span class="c"># &#61;&gt; &#40;ProgressExceededException&#41;</span>
<span class="k">rescue</span>
  puts <span class="s">&quot;Sorry, installation taking longer than expected&quot;</span>
<span class="k">end</span>

sleep <span class="n">0.1</span></code></pre>
</div>
</body>
</html>
